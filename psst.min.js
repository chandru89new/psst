document.addEventListener("dragover",function(a){a.preventDefault()},!1);document.addEventListener("dragend",function(a){a.preventDefault()},!1);document.addEventListener("drop",function(a){a.preventDefault()},!1);
var psst=function(a,g){return new Promise(function(f,e){if(a){var k=function(a){return new Promise(function(h,b){var c=new FileReader;c.readAsDataURL(a);c.error&&b(c.error);c.onloadend=function(){h(c.result)}})},b=function(a){return new Promise(function(h,b){var c=new FileReader;c.readAsText(a);c.error&&b(c.error);c.onloadend=function(){h(c.result)}})};if(a.dataTransfer){var d=a.dataTransfer.files[0]?a.dataTransfer.files[0].name:null;if(d){var l=["jpg","png","jpeg"];g&&"[object Array]"==Object.prototype.toString.call(g)&&
g.forEach(function(a){l.push(a)});d=d.split(".").pop().toLowerCase();0>l.indexOf(d)?e({status:"failure",message:"This filetype is not allowed."}):(d=a.dataTransfer.files[0].type,0<=d.indexOf("image")?k(a.dataTransfer.files[0]).then(function(a){f({status:"success",time:Date.now(),type:"image",data:a})})["catch"](function(a){console.error(a)}):b(a.dataTransfer.files[0]).then(function(a){f({status:"success",time:Date.now(),type:"file",data:a})})["catch"](function(a){}))}else e({status:"failure",message:"For some reason, the dropped file couldn't be handled."})}else a.clipboardData&&
(b=a.clipboardData.items?a.clipboardData.items:!1,b.length?(d=b[1]?b[1].type:b[0].type)?0<=d.indexOf("image")?(b=b[1]?b[1].getAsFile():b[0].getAsFile(),k(b).then(function(a){f({status:"success",time:Date.now(),type:"image",data:a})})["catch"](function(a){console.error(a)})):f({status:"success",time:Date.now(),type:"text",data:a.clipboardData.getData("text")}):e({status:"failure",message:"Couldn't detect clipboard data."}):e({status:"failure",message:"No data in clipboard."}))}else e({status:"failure",
message:"psst(e) received a non-event for 'e'"})})};